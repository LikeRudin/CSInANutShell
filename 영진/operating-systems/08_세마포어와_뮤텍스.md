# CONTENTES

```
    1. 동기화와 임계영역 개요
        - 동기화
        - 임계영역
        - 코드의 영역구분
        - 임계영역의 문제 해결 요구사항

    2. 세마포어와 뮤텍스
        - 정의 및 개요
        - 뮤텍스
        - 세마포어

```

---

# DETAILS

## 1. 동기화와 임계영역 개요

### 동기화 (Synchronization) in OS

프로세스의 작업순서를 정해주는 것

- 필요한 상황: 한번에 하나의 프로세스만 접근하여야하는 자원 혹은 작업에 여러 프로세스가 작업을 요청하는경우

  - ex) 임계자원 접근 순서 처리

  - 임계자원: 여러 프로세스가 동시에 사용할 수없는 자원

<br>

- 동기화 작업이 중요한곳

  - 프린터와 같이 둘 이상의 프로세스가 동시 접근할수없는 자원을 사용하는 경우

  - 한 프로세스의 자원 사용의 결과가 다음 프로세스의 사용에 영향을 주는 경우

### 임계 영역 (critical section)

영향이 발생 및 관찰되는 영역

### 임계영역 in OS

공유 데이터에 접근하는 코드영역

- 공용변수를 읽고, 테이블을 갱신하고, 파일에 쓰는 등의 작업을 수행

- 한번에 하나의 프로세스(스레드) 만이 임계영역에 들어 갈 수있음

### 코드의 영역구분

임계영역을 갖는 코드는 다음과 같은 기능을 수행하는 덩어리 블럭으로 구성

```
반복문
{

{진입 영역 entry Section
    - 임계 영역에들어갈 수있는지 확인}

    {임계 영역 critical Section}

    {해제 영역 exit Section
        - 다음에 진입할프로세스를 선택}

{잔류영역 remainder Section
    - 기타 로직}

}
```

### 임계영역 문제 해결의 요구사항

1. 상호배제

   - 임게영역에서 작업을 수행중인 프로세스는 오직 한개여아 함
   - 한 프로세스가 작업중이면 다른것들은 접근불가

2. 진행

   - 현재 작업중인 프로세스가 없는 임계영역에 여러 프로세스가 진입을 시도한다면, 반드시 하나의 프로세스는 들여보내야 함
   - 진입할 프로세스를 결정하는 절차에의해 진입이 무한정으로 미루어질 수없음

3. 제한된 대기
   - 한 프로세스가 임계영역 사용을 요청한다면, 그시점으로부터 임계영역에 먼저 접근할 수있는 프로세스는 유한해야함.

## 2. 세마포어와 뮤텍스

임계영역 문제해결의 요구사항중, 상호배제를 해결하는 기법들

### 뮤텍스 `Mut`ual `Ex`clusion

상호배제 문제들을 해결하기위한 잠금 매커니즘(lock and key) 기술들을 일컫음

### 뮤텍스 프로세스

프로세스마다 임계영역에 진입할 수 있는 key 변수가 존재함

프로세스는 임계영역에 진입할때 key를 차지해 잠금상태를 만든후
임계영역에서의 작업을마친후 key를 반환한다.

- 각 프로세스의 접근 권한을 확인하기위한 개별 변수가 존재

### 세마포어 (semaphore)

세마포어: 복잡한 문제에도 일반화 시키기 쉽게 고안된 새로운 상호배제 기법

![](https://dictionary.cambridge.org/images/thumb/semaph_noun_004_2316.jpg?version=5.0.341)
![](https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Railway_semaphore_signal_located_on_the_island_platform_at_Junee_Railway_Station.jpg/1200px-Railway_semaphore_signal_located_on_the_island_platform_at_Junee_Railway_Station.jpg)

주로 깃발이나 바 같은것을 사용하여 정보를 전달 하는 장치 혹은 수단 그자체를 세마포어라 부름

### 세마포어 in OS

상호배제를 구현하는 동기화 도구로, 각각의 key에 프로세스를 할당하는것이아니라
정수형 공용변수를 통해 진입가능 여부를 확인

주로 정수형 공용변수 s로 표현

| s의 상태      | 양수                          | 0 또는 음수 |
| ------------- | ----------------------------- | ----------- |
| 프로세스 행동 | s를 1 감소 <br> 임계영역 진입 | 대기        |

```

P(s): probeerte verlagen - 진입점

    if (s >  0) {
        s -= 1;
    }
    else {
        대기
    }
{임계영역 }

V(s): verlagen - 해제점
    if (대기중인 프로세스 존재)     {
        하나만 임게영역으로 통과시킴
    }
    else {
        s += 1;
    }


```

# QUESTION

### Q.1 세마포어가 무슨 문제를 해결하는지 설명하세요.

- OS에서 어떤 문제를 해결하기위해 위해 고안되었는지 포함되어야합니다.
- 기존에 사용하던 전통적인 Lock and key 방식의 가지고있던 문제점도 설명하면 좋습니다.

---

# ANSWER

### A. 세마포어가 해결하는 문제

세마포어는 OS에서의 상호배제 문제를 해결하기위해 고안되었습니다. 임계영역에 들어갈 수있는지를 확인하는 역할을 합니다.

기존에 사용하던 전통적인 Lock and key 방식은, 각 프로세스를 위한 key 변수가 따로 존재했는데, 이는 key를 구현하는 방식에 따라 복잡도가 변화무쌍한 단점이 있었습니다.

세마포어는 하나의 공용변수를 통해 프로세스의 임계영역 진입 여부를 체크하므로, 굉장히 간단하게 임계영역 상호배제 문제를 해결합니다.

기존의 Lock and key방식은 고유번호가 있는 번호표를 받고 은행에서 기다리는것과 비슷하다면, 세마포어방식은 그냥 내앞에 몇명이있는지, 지금 들어갈수 있는지만 확인하는 방식입니다.
