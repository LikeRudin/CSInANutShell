# CONTENTS

```
    1. Entity
        - 개요
        - 생성기준
        - 분류기준
          - 독립/의존
          - 기본/중심/행위

    2. Relation
        - 개요
        - 분류
        - 표기: 이름/차수/선택사양

    3. Diagram
        - 개요
        - 데이터베이스 모델링


```

---

# DETAILS

# 1. Entity

## 개요

### 사전적 정의

```
Definition: a thing with distinct and independent existence.

다른것과 구분되며 독립적으로 존재하는것
```

## Entity 특징

생성시 반드시 고려해보야하는 특징들

1.  엔티티는 업무에서 필요해야한다

    - 시스템 내부에서 사용되어야 한다.

- ex) 직접 고민해봅시다.

  - 출입/근무 인원을 기록하는 업무 프로그램에는 환자 엔티티가 필요할까요?

    - `병원`에서 사용하는 프로그램이라면 환자엔티티는 아마도 필요할것

    - 일반 회사에서는 사원 외의 환자만을 기록한 테이블을 만들려면 특별한 이유가 있어야함
      - ex) 아픈 직원들을 위한 고정 복지 시스템이라던가..

  <br>

2.  식별가능

    - 하나이상의 식별자(Identifier)로 식별이 가능해야함

<br>

3.  시스템이 해당 엔티티의 인스턴스를 2개이상 사용

    - 엔티티는 여러개의 데이터의 틀이되는것,
      기본적으로 특정 형태를 갖는 데이터를 여럿 생성하기 위해 존재

    - 프로그래밍 언어의 클래스나 생성자 함수의 역할을 함

    - 단 한번만 필요한 로직을위해 함수를 만들거나, 단 한개만 사용될 객체를위해 클래스를 만드는것은 드문 일

<br>

4. 영속적
   - 인스턴스는 생성과 소멸을 반복
   - 엔티티는 개발자가 직접 제거하지 않는이상 불멸

<br/>

5.  속성을 보유

    - 식별자를 포함한 속성을 보유
      <br/>

6.  관계(relation)를 보유

    - 다른 엔티티와 관계없이 홀로 존재하는것은 의미가 없음
    - 그런 엔티티가 존재한다면 설계 미스를 의심해볼것

![](https://www.prisma.io/docs/static/64abbe64caaf43c92f04ff21aaff7fbe/d880f/one-to-many.png)

- 예외

  - 시스템 로그 기록 테이블
  - 통계를 위한 테이블

    - 유저들의 게시글작성, 좋아요 클릭, 댓글생성등의 모든 행동의 횟수를 추적하는 테이블을 만든다면, 엔티티와 관계를 굳이 줄 필요가없음.

  - 시스템 처리를 위한 테이블
    <br/>

## 분류

### 생성 및 유지방식에 따른 분류

- 독립/의존 (dependent/independent)

  - 독립 엔티티: 다른 엔티티 인스턴스의 활동이나 존재와 관계없이 생성되는 엔티티

  - 의존 엔티티: 다른 인스턴스의 활동에 의해 생성 및 유지되

### 프로그램에서의 업무 역할에 따른 분류

- 기본 엔티티:(Fundamental Entity)

  - 독립 엔티티와 비슷하며 인스턴스가 기본적으로 혼자 존재할 수있는 엔티티
  - 업무를 수행하는 주체

<br>

- 중심 엔티티(Main Entity)

  - 기본 엔티티에 의해 생성되는 엔티티
  - 업무의 중추, 업무의대상

<br>

- 행위 엔티티(Active Entity) 두개이상의 엔티티에의해 발생하는 여러가지 행위를 기록한 엔티티

  - 업무 목록

<br>

### 직접 생각해봅시다.

- 음식배달 어플에서 고객과 식당, 음식과 주문목록이 있다면 각각 어떻게 분류할 수있을까요?

- 고객과 식당은 기본, 음식은 중심, 주문목록은 행위 엔티티로 분류될것입니다.

# 2. Relation

## 개요

관계

사전적 정의

```
definition: the way in which two or more concepts, objects, or people are connected; a thing's effect on or relevance to another.

서로다른 두개이상의 컨셉, 객체, 사람들이 연결되는 방식 영향이나 관련성이있는 효과
```

DB에서의 정의:
수학의 관계를 그대로 빌려왔다.

함수보다 더 일반적인 개념

- 두 집합의 원소를 묶은 순서쌍의 집합을 관계라고 부름

A의 원소 a와 집합 B의 원소 b를 포함하는 순서쌍
`(a,b)`의 집합

관계중에서도 A의 모든 원소에a에대하여 단 하나의 원소 b가 대응되는것을 `함수`라고 한다

![](https://t4.daumcdn.net/thumb/R720x0/?fname=http://t1.daumcdn.net/brunch/service/user/5wEC/image/EmBJFlXQ5sGM6D-1kVG7eGkzRoc.png)

그중에서도 모든 A의 원소중 아무거나 두개를 골랐을때, 그에 대응되는 B의 원소 두개가 항상 서로 다르면 `단사함수 (일대일 함수)`

모든 B의 원소에 대응되는 A의 원소가 존재하면 `전사함수`

전사이고 단사인 함수는 전단사 함수(일대일 대응 함수)

### 함수와 관계의 차이

![](https://www.media4math.com/sites/default/files/library_asset/images/Defintion--FunctionsAndRelations--VisualModelsRelations.png)

위의 설명에서 함수는 `a의 원소 하나`를 기준으로 갖지만, 관계는 그렇지 않음

A와 B집합의 원소로 이루어진 순서쌍의 집합이기만 하면 관계

- 방정식은 관계
- 대소관계는 관계

집합A, B 를 각각 자연수 집합이라고 하자

A의 원소 2 에대해, 2보다 큰 값을 갖는 B의 원소는
3,4,5... 무한히 많다.

```
(1,2), (1,3), (1,4)....
(2,3), (2,4), (2,5)...
```

관계:
두집합의 원소의 순서쌍으로 이루어진 집합

- 대응되는지의 여부와 상관없음

관계도 함수와 마찬가지로 특정 성질에따라 다양한 분류를 할 수있음

추이관계: 관계집합의 원소가 (a,b), (b,c)를 포함하면 반드시
(a,c)도 포함하는 관계

- 대소관계도 추이관계의 일종이다. (a<b && b<c) === a<c

## 분류

### 연관/의존에 의한 분류

의존관계

- 관계를 맺은 두 엔티티의 인스턴스중 하나가 다른것의 `행위 또는 존재`에 의해 생성되는 경우
  - 노마드 코더의 댓글 인스턴스들은 유저들에게 의해 생성됨

연관관계

- 서로 별도로 존재할 수있으나, 연관이 있어서 연결되어있는 관계
  - 노마드의 강좌들과, 유저는 별도로 존재할 수 있음.
  - 단한명의 유저가 없다고 해서 강의도 없는것은 아님

## 관계의 표기

DB에대한 이해를 위해 다양한 표기법 및 명명법을 가짐

### 이름: 관계의 이름

각 관계별로 두개를 갖는다.

행위를 나타내는 동사로 표현

- 음식메뉴는 식당에게 소유된다.

- 식당은 음식메뉴를 포함한다.

- 이렇게 딱딱하게 이름을 짓는것은 피곤한일이고, 작고 간단한 작업의 경우에는 생략하기도 함.
  - 하지만 데이터에대한 오류/왜곡을 피하기위해 굉장히 신중해야 함

![](https://img1.daumcdn.net/thumb/R1280x0/?fname=http://t1.daumcdn.net/brunch/service/user/bpR7/image/avFfNRxYEkvu6od-5plsKaw8qbI.jpg)

### 차수: 관계의 차원(degree/Cardinality)

수학의 Cardinality 개념을 빌려서 정보공학 언어에 차용했다.

```
두 집합간의 일대일 대응 함수가 정의되면,
두 집합은 같은 cardinality를 가지고있다.

유한집합 - 수로 표현된다.
무한집합 - 기호로 표현

자연수 전체의 집합과 짝수의 집합, 정수의집합, 유리수의 집합은 같은 cardinality를 갖는다.

(1,2,3...) *2 => (2,4,6...)
- 자연수와 짝수의 집합간 1:1 대응 함수 y=2x 가 존재한다.
-둘은 같은 cardinality를 갖는다

무리수의 집합, 실수의 집합은 자연수보다 큰 cardinality를 갖는다.

- 포인트: 무한집합은 Cardinality 비교를 기호로 나타낸다.

```

DB에서는 각 엔티티에서 하나의 관계에 참여하는 `인스턴스의 비율을` 나타냄

![](https://www.prisma.io/docs/static/6c4a358e047f7f5e8f1b533e6f35bc7e/d880f/sample-schema.png)

- 1-1

두 엔티티간 인스턴스는 서로 하나씩만 연관을 가짐

- 1:n

한 엔티티의 인스턴스가 다른엔티티 인스턴스 여러개와 관계를 가짐

- n:m

한 엔티티의 인스턴스가 서로 다른엔티티의 인스턴스 여러개와 관계를 가짐

### 관계의 필수성: Optional/mandatory

엔티티 인스턴스간 관계가 필수일 수도있고, 아닐 수도있음

- 노마드 강좌와 유저 인스턴스간 서로 관계가 있을수도 있으나, 없을수도 있음

- 유저의 댓글은 반드시 유저를 필요로 함

## 3. Diagram

# 개요

ERD (Entity Relation Diagram)

엔티티간 관계를 묘사한 그림

`데이터 베이스 모델링`중 논리적 모델링 과정에서 생성하며, 데이터시스템속 엔티티간 관계 구조를 시각적으로 표현하는 도구이자 기법

- 전체적으로 비슷하나 굉장히 다양한 바리에이션이 있음

- IE표기법과 Baker 표기법이 대표적

https://www.erdcloud.com/d/DX5JZsnmtffDtr535

## 데이터베이스 모델링

개념적 모델 생성 => 논리적 모델링 => 물리적 모델링

개념적 모델: 업무에 필요한 엔티티가 뭔지 고민하여 이름과 연관관계를표시한모델

논리적 모델 생성: 사용하는 DB시스템의 DDL로 모델 기술, non-sql이냐, rdb냐에따라 모양이 다름

물리적 모델생성: 실제로 DB에 생성해주는것

---

# QUESTION

1. 1:1관계의 개념을 설명해주시고, 이를 사용하는 이유 용도를 구체적인 예시와 함께 설명해주세요.

2. 엔티티의 표기 및 명명법, 특징이나 분류방식은 너무 복잡하고 난해해 보입니다. 왜 이런것을 알아야할까요?

---

# ANSWER

1. 1:1관계의 개념 및 예시가 포함된 용도에대한 설명

1:1관계는 두 엔티티의 인스턴스들 간의 관계가, 각 인스턴스별로 하나싹만 관련이 있는 관계를 말합니다.

예를 들어, 학교에서는 각 학생에게 사물함을 하나씩 제공하며, 사물함 또한 각각 한 명의 학생에게만 소유됩니다.

사물함과 학생에대한 테이블을 만들어 1:1관계를 부여할 수있습니다.
사실 두 개의 엔티티는 사실 하나의 엔티티로 표현할 수도 있습니다.
위의 예시에서는 학생 엔티티에 사물함 정보가 포함된 필드를 추가하는 방식으로 하나의 엔티티로 합쳐줄 수있습니다.

그러므로 1:1 엔티티를 사용하는이유는
사실 하나로 구성할 수있는 엔티티를 두개로 분리하는 이유와 같습니다.

먼저, 쿼리 성능 최적화에 쓰일 수 있습니다. 하나의 테이블에 넣을수있으나, 주로 함께필요한 필드들이 다르다고 하면 서로 함께 쓰이는 필드끼리 묶은 집합을 만들어 새로운 테이블로 분리해줄 수있습니다.
그리고 분리된 테이블간에 1:1관계를 준다면, 더 잦은 쿼리에 더 빠르게 대응할 수있습니다.

또, 특정 필드를 숨기는데 사용이되기도 합니다.
사물함과 학생 테이블이 분리되어있는경우에는 사물함 테이블의 데이터만 제공하여 학생의 다른 인적사항은 숨길 수있습니다.

2. 표기법, 명명, 분류를 따지는 이유

데이터베이스의 목표에 맞는 데이터 구조를 설계하기 위해서입니다.

똑같은 이름의 데이터라고 해도 사용하는 프로그램에 따라 업무 내용,속성, 생성 방식이나 행동양식도 다릅니다.

그러므로 이름외에도 추가적인 방법으로 확실하게 분류해주어야 업무에 맞는 프로그램을 생성할 수있습니다.

---

# REFERENCE

프리스마 Doc https://www.prisma.io/docs/concepts/components/prisma-schema/relations

https://brunch.co.kr/@yoongg59/13
