# 03 처리장치

# CONTENTS

    처리장치 + 제어장치 = 중앙처리장치

    - 처리장치

        - 1. 마이크로연산
                    
                    - 레지스터 전송 마이크로 연산
                    - 산술 마이크로 연산
                    - 논리 마이크로 연산
                    - 시프트 마이크로 연산
        
        - 2. 처리장치의 구성요소
                    
                    - 내부버스
                    - 레지스터세트
                    - 산술/논리연산장치
                        - 산술연산회로 - 논리연산회로
                        - 상태 레지스터 CSZV - 시프터
                    - 제어단어 ABFHD 
                        - 작성법

---

# DETAILS

### 처리장치 + 제어장치 = 중앙처리장치

데이터를 처리하는 연산을 실행하는 `처리장치` 와 연상의 실행순서를 결정하는 `제어장치`가 결합하여 구성


### 처리장치

`산술/논리연산장치`와 `레지스터 세트`로 구성

1. 연산장치: 연산 수행

2. 레지스터: 연산에 사용될 데이터, 연산결과 데이터를 저장하는 고속 기억장치

- 레지스터는 프로그래밍 언어로 비유하자면 변수역할

## 1. 마이크로 연산

레지스터 및 기억장치 데이터에 수행되는 기본적인 연산

레지스터 전송, 산술, 논리, 시프트 연산이 있다.

클록 펄스라는 유닛 시간단위 동안 수행된다.

### 레지스터 전송 마이크로 연산

한 레지스터에서 다른 레지스터로의 데이터 전송


```
레지스터 R1(source)의 내용을 레지스터 R2(destination)에 전송

R2 <- R1
```
```
클록과 함께 표기

T1: R2 <- R1
```

|symbol|meaning|example|
|--|--|--|
|영문자와숫자|레지스터|R2, DR, MBR|
|화살표|자료의 이동|R2 `<-` R1|
|쉼표|연산 구분|R2 <- R1`,` MAR <-PC |
|대괄호|주소|M`[adr]`|

### 산술 마이크로 연산

덧셈, 뺄셈, 1증가, 1감소, 보수연산

- 보수연산: 비트내부의 0과 1을 반전시킨다

```
      __
R0 <- R1   R1의 보수를 R0에 저장

R1 + 1     1 증가

R1 - 1     1 감소

R0 <- R1 + R2  R1과 R2 레지스터값을 합하여 R0에 저장
```

### 논리 마이크로 연산

`AND`, `OR`, `XOR`, `NOR`

레지스터의 비트끼리 연산

### 시프트 마이크로 연산

비트의 측면이동

왼쪽, 오른쪽으로 밀리는값은 사라지고,
새로 생성되는값은 0임

```
왼쪽으로 시프트
010000 <- 101000 

오른쪽으로 시프트
010000 -> 001000 
```


## 3. 처리장치의 구성요소


### 내부버스

- 레지스터들 간 `데이터 전송 공용선로`의 집합

- 멀티플렉서와 디코더를 이용한다

### 산술/논리 연산장치

- 산술연산회로
    - 전자가산기를 병렬연결한 병렬가산기가 대표적

<br>

- 논리연산회로
    - 레지스터에있는 비트에 독립적인 연산을 시행

<br>

- 산술/논리 연산장치
    - 산술연산회로 + 논리연산회로가 모드포함


<br>

### 상태 레지스터


산술연산의 연산결과 상태값을 저장

네개의 비트로 구성

`C`arry
`S`ign
`Z`ero
o`V`erflow

|플래그 비트|carry|sign|zero|overflow|
|--|--|--|--|--|
|값이 1|부호없는 산술연산결과의 비트범위 초과 |결과가 음수|결과0|부호있는 산술연산 결과의 비트범위 초과|

### 시프터

비트를 옆으로 한칸씩 이동시키는 시프트 연산을 수행

### 제어단어

제어변수: 
 처리장치에 있는 선택신호
- 마이크로 연산을 선택하는 변수
    - 버스, ALU, 결과 저장 레지스터 지정

<br>


제어단어 - 제어변수들의 묶음


제어단어 구성 필드 예시 - 16비트
```
A: ALU 1번 버스 선택 3비트
B: ALU 2번 버스 선택 3비트
F: ALU 연산선택 4비트
H: 시프터 연산선택 3비트
D: 도착 레지스터 선택 비트
```

작성예시

|필드|A|B|D|F|H|
|---|---|---|---|---|---|
|기호|R2|R3|R1|F = A - B|시프트X|
|2진코드|010|011|001|0101|000|

사용법

- 작성한 제어단어는 기억장치에 저장

- 기억장치의 출력을 처리장치 구성요소의 선택신호 입력단자로 연결
- 기억장치에 연속적으로 저장된 제어단어를 읽는 방식으로 처리장치에서 마이크로연산을 정해진 순서대로 수행

---

# QUESTION

상태 레지스터와 구성 비트의 역할에대해 설명하시오

# ANSWER

### 상태 레지스터

처리장치의 산술연산 결과의 `상태`를 알려주는플래그 비트가 모인 레지스터이다.

연산값이아닌 결과의 상태를 통해,
프로그램이 올바르게 수행되고있는지를 판단하여, 분기와 같은 제어흐름 변경에대한 판단 정보를 제공한다.

구성비트는 Carry, Zero, Sign, OverFlow를 나타내는 C, Z, S, V 비트가 대표적이며, 
컴퓨터의 제조사에따라 다양한 비트가 더많이 존재한다.

### 구성 비트의 역할비트의 역할

특정 상태를 충족하면 1 아니면 0을 통해
연산 결과의 상태를 표시한다.

1. Carry 비트:

부호 없는 산술연산의 결과가 레지스터가 표현할 수있는 범위를 넘었는지(overflow)를 표시한다.

2. Zero 비트:

연산의 결과가 0인지 표시한다.

3. Sign 비트:

연산의 값이 음수인지 표시한다.

4. OverFlow 비트:

부호가 있는 산술연산이 오버플우 되었는지 표시한다.